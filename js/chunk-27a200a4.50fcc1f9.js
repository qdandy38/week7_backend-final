(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27a200a4"],{"07fa":function(t,e,a){"use strict";var o=a("1d4d"),s=a.n(o);s.a},1799:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination mb-0"},[a("li",{staticClass:"page-item",class:{disabled:1===t.pages.current_page}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.emitPages(t.pages.current_page-1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pages.total_pages,(function(e,o){return a("li",{key:o,staticClass:"page-item",class:{active:e===t.pages.current_page}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.emitPages(e)}}},[t._v(t._s(e))])])})),a("li",{staticClass:"page-item",class:{disabled:t.pages.current_page===t.pages.total_pages}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.emitPages(t.pages.current_page+1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])},s=[],r={props:{pages:{}},methods:{emitPages:function(t){this.$emit("change-pages",t)}}},i=r,n=a("2877"),c=Object(n["a"])(i,o,s,!1,null,null,null);e["a"]=c.exports},"1d4d":function(t,e,a){},"1dde":function(t,e,a){var o=a("d039"),s=a("b622"),r=a("2d00"),i=s("species");t.exports=function(t){return r>=51||!o((function(){var e=[],a=e.constructor={};return a[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"65f0":function(t,e,a){var o=a("861d"),s=a("e8b5"),r=a("b622"),i=r("species");t.exports=function(t,e){var a;return s(t)&&(a=t.constructor,"function"!=typeof a||a!==Array&&!s(a.prototype)?o(a)&&(a=a[i],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===e?0:e)}},"6d09":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-3",attrs:{id:"products"}},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("pagination",{attrs:{pages:t.pagination},on:{"change-pages":t.getProducts}}),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openModal("new")}}},[t._v("建立新產品")])],1),a("table",{staticClass:"table table-hover mt-3"},[t._m(0),a("tbody",t._l(t.products,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.category))]),a("td",[t._v(t._s(e.title))]),a("td",[t._v(t._s(e.origin_price))]),a("td",[t._v(t._s(e.price))]),a("td",{staticClass:"text-center"},[e.enabled?a("span",{staticClass:"text-success"},[t._v("啟用")]):a("span",{staticClass:"text-danger"},[t._v("未啟用")])]),a("td",[a("div",{staticClass:"btn-group btn-group-sm"},[a("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(a){return t.openModal("edit",e)}}},[t._v("編輯")]),a("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.openModal("delete",e)}}},[t._v("刪除")])])])])})),0)]),a("productModal",{attrs:{"temp-product":t.tempProduct,"is-new":t.isNew},on:{done:t.getProducts}}),a("delModal",{attrs:{"temp-product":t.tempProduct},on:{done:t.getProducts}})],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{width:"120"}},[t._v("分類")]),a("th",[t._v("產品名稱")]),a("th",{attrs:{width:"120"}},[t._v("原價")]),a("th",{attrs:{width:"120"}},[t._v("售價")]),a("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("是否啟用")]),a("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("編輯")])])])}],r=(a("99af"),a("1799")),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","data-backdrop":"static"}},[a("div",{staticClass:"modal-dialog modal-xl"},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"imgUrl"}},[t._v("輸入圖片網址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.imageUrl[0],expression:"tempProduct.imageUrl[0]"}],staticClass:"form-control",attrs:{type:"text",id:"imgUrl",placeholder:"請輸入圖片連結"},domProps:{value:t.tempProduct.imageUrl[0]},on:{input:function(e){e.target.composing||t.$set(t.tempProduct.imageUrl,0,e.target.value)}}})]),a("img",{staticClass:"img-fluid",attrs:{src:t.tempProduct.imageUrl[0],alt:""}})]),a("div",{staticClass:"col-sm-8"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"productName"}},[t._v("產品名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.title,expression:"tempProduct.title"}],staticClass:"form-control",attrs:{type:"text",id:"productName",placeholder:"請輸入產品名稱"},domProps:{value:t.tempProduct.title},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"title",e.target.value)}}})]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"col-sm"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"productCategory"}},[t._v("分類")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.category,expression:"tempProduct.category"}],staticClass:"form-control",attrs:{type:"text",id:"productCategory",placeholder:"請輸入分類"},domProps:{value:t.tempProduct.category},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"category",e.target.value)}}})])]),a("div",{staticClass:"col-sm"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"productUnit"}},[t._v("單位")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.unit,expression:"tempProduct.unit"}],staticClass:"form-control",attrs:{type:"text",id:"productUnit",placeholder:"請輸入單位"},domProps:{value:t.tempProduct.unit},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"unit",e.target.value)}}})])])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"col-sm"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"productOriginPrice"}},[t._v("原價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.origin_price,expression:"tempProduct.origin_price"}],staticClass:"form-control",attrs:{type:"number",id:"productOriginPrice",placeholder:"請輸入原價"},domProps:{value:t.tempProduct.origin_price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"origin_price",e.target.value)}}})])]),a("div",{staticClass:"col-sm"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"productPrice"}},[t._v("售價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.price,expression:"tempProduct.price"}],staticClass:"form-control",attrs:{type:"number",id:"productPrice",placeholder:"請輸入售價"},domProps:{value:t.tempProduct.price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"price",e.target.value)}}})])])]),a("hr"),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"productDescription"}},[t._v("產品描述")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.description,expression:"tempProduct.description"}],staticClass:"form-control",attrs:{id:"productDescription",placeholder:"請輸入產品描述"},domProps:{value:t.tempProduct.description},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"description",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"productContent"}},[t._v("說明內容")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.content,expression:"tempProduct.content"}],staticClass:"form-control",attrs:{id:"productContent",placeholder:"請輸入說明內容"},domProps:{value:t.tempProduct.content},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"content",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.enabled,expression:"tempProduct.enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"enabled"},domProps:{checked:Array.isArray(t.tempProduct.enabled)?t._i(t.tempProduct.enabled,null)>-1:t.tempProduct.enabled},on:{change:function(e){var a=t.tempProduct.enabled,o=e.target,s=!!o.checked;if(Array.isArray(a)){var r=null,i=t._i(a,r);o.checked?i<0&&t.$set(t.tempProduct,"enabled",a.concat([r])):i>-1&&t.$set(t.tempProduct,"enabled",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.tempProduct,"enabled",s)}}}),a("label",{attrs:{for:"enabled"}},[t._v("是否啟用")])])])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.updateProduct()}}},[t.btnLoading?a("div",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[t._v("Loading...")])]):t._e(),t._v(" 確認 ")])])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header badge-primary"},[a("h5",{staticClass:"modal-title"},[t._v("新增商品")]),a("button",{staticClass:"close text-white",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],c={props:{tempProduct:{},isNew:Boolean},data:function(){return{btnLoading:!1}},methods:{updateProduct:function(){var t=this,e="".concat("https://course-ec-api.hexschool.io","/api/").concat("822f665f-fdb8-48cd-a3c7-a13100ae246a","/admin/ec/product"),a="post";this.isNew||(e="".concat("https://course-ec-api.hexschool.io","/api/").concat("822f665f-fdb8-48cd-a3c7-a13100ae246a","/admin/ec/product/").concat(this.tempProduct.id),a="patch"),this.btnLoading=!0,this.$http[a](e,this.tempProduct).then((function(){t.$emit("done"),t.btnLoading=!1,$("#productModal").modal("hide"),Swal.fire({toast:!0,title:t.isNew?"新增成功":"編輯成功",icon:"success",showConfirmButton:!1,timer:2500,padding:"2rem"})})).catch((function(t){console.log(t)}))}}},d=c,l=(a("07fa"),a("2877")),u=Object(l["a"])(d,i,n,!1,null,"ca071d96",null),p=u.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"delModal",tabindex:"-1",role:"dialog","data-backdrop":"static"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body text-left"},[a("p",[t._v("確定刪除"),a("span",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.tempProduct.title))]),t._v("？(刪除後無法復原)")])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.delProduct()}}},[t.btnLoading?a("div",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[t._v("Loading...")])]):t._e(),t._v(" 確定 ")])])])])])},v=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header badge-danger"},[a("h5",{staticClass:"modal-title"},[t._v("刪除產品")]),a("button",{staticClass:"close text-white",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],f={props:{tempProduct:{}},data:function(){return{btnLoading:!1}},methods:{delProduct:function(){var t=this,e="".concat("https://course-ec-api.hexschool.io","/api/").concat("822f665f-fdb8-48cd-a3c7-a13100ae246a","/admin/ec/product/").concat(this.tempProduct.id);this.btnLoading=!0,this.$http.delete(e).then((function(){t.$emit("done"),t.btnLoading=!1,$("#delModal").modal("hide"),Swal.fire({toast:!0,title:"刪除成功!",icon:"success",showConfirmButton:!1,timer:1500,padding:"2rem"})})).catch((function(t){console.log(t)}))}}},g=f,h=Object(l["a"])(g,m,v,!1,null,null,null),b=h.exports,P={components:{pagination:r["a"],productModal:p,delModal:b},data:function(){return{products:[],isLoading:!1,pagination:{},tempProduct:{imageUrl:[],enable:!1},isNew:!1}},props:["token"],methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a="".concat("https://course-ec-api.hexschool.io","/api/").concat("822f665f-fdb8-48cd-a3c7-a13100ae246a","/admin/ec/products?page=").concat(e);this.isLoading=!0,this.$http.get(a).then((function(e){t.products=e.data.data,t.pagination=e.data.meta.pagination,t.isLoading=!1})).catch((function(t){console.log(t)}))},getProduct:function(t){var e=this,a="".concat("https://course-ec-api.hexschool.io","/api/").concat("822f665f-fdb8-48cd-a3c7-a13100ae246a","/admin/ec/product/").concat(t);this.isLoading=!0,this.$http.get(a).then((function(t){e.isLoading=!1,e.tempProduct=t.data.data,$("#productModal").modal("show")})).catch((function(t){console.log(t)}))},openModal:function(t,e){switch(t){case"new":this.tempProduct={imageUrl:[],enable:!1},this.isNew=!0,$("#productModal").modal("show");break;case"edit":this.getProduct(e.id),this.isNew=!1;break;case"delete":this.tempProduct=JSON.parse(JSON.stringify(e)),$("#delModal").modal("show");break}}},created:function(){this.getProducts()}},C=P,_=Object(l["a"])(C,o,s,!1,null,null,null);e["default"]=_.exports},8418:function(t,e,a){"use strict";var o=a("c04e"),s=a("9bf2"),r=a("5c6c");t.exports=function(t,e,a){var i=o(e);i in t?s.f(t,i,r(0,a)):t[i]=a}},"99af":function(t,e,a){"use strict";var o=a("23e7"),s=a("d039"),r=a("e8b5"),i=a("861d"),n=a("7b0b"),c=a("50c4"),d=a("8418"),l=a("65f0"),u=a("1dde"),p=a("b622"),m=a("2d00"),v=p("isConcatSpreadable"),f=9007199254740991,g="Maximum allowed index exceeded",h=m>=51||!s((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),b=u("concat"),P=function(t){if(!i(t))return!1;var e=t[v];return void 0!==e?!!e:r(t)},C=!h||!b;o({target:"Array",proto:!0,forced:C},{concat:function(t){var e,a,o,s,r,i=n(this),u=l(i,0),p=0;for(e=-1,o=arguments.length;e<o;e++)if(r=-1===e?i:arguments[e],P(r)){if(s=c(r.length),p+s>f)throw TypeError(g);for(a=0;a<s;a++,p++)a in r&&d(u,p,r[a])}else{if(p>=f)throw TypeError(g);d(u,p++,r)}return u.length=p,u}})},e8b5:function(t,e,a){var o=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==o(t)}}}]);
//# sourceMappingURL=chunk-27a200a4.50fcc1f9.js.map